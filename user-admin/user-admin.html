
<link rel="import" href="../user-admin/user-service.html">
<link rel="import" href="../user-admin/user-list.html">
<link rel="import" href="../user-admin/user-edit.html">


<polymer-element name="user-admin" attributes="">


    <template>
         <user-service id="user_service" response="{{entity}}"></user-service>

        <user-list id="list" hidden?="{{entityId}}"
                   on-entity-edit="{{entityEditListener}}" ></user-list>


        <user-edit  entity="{{entity}}"
                    on-entity-save="{{onSave}}" on-entity-cancel="{{onCancel}}"
                    hidden?="{{!entityId}}"
        ></user-edit>

    </template>
    <script>

        Polymer('user-admin', {

            entityId : undefined,
            entity : undefined,
            ready: function () {

            },
            entityEditListener : function(e) {
                var entityId =  e.detail._id;
                this.entityId = entityId;
                console.log("On Entity Edit : ",entityId);
                this.$.user_service.entityGetById(entityId)
            },
            onCancel : function (entity) {
                console.log("On Cancel");
                this.$.user_service.refresh();
                this.entityId = undefined;
                this.entity = undefined;
            },
            onSave : function (entity) {
                console.log("On Save");
                this.$.user_service.refresh();
                this.entityId = undefined;
                this.entity = undefined;
            }


        });

    </script>


</polymer-element>